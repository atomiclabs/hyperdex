{"version":3,"file":"hash.js","sourceRoot":"","sources":["../src/hash.ts"],"names":[],"mappings":";;;;;;;AAAA,AAAO,AAAE,AAAU,AAAE,AAAM,AAAQ;;;;;;;;;;AACnC,AAAO,AAAE,AAAgB,AAAE,AAAM,AAAI,AAErC,AAAM;;;;;;;;;;kBAAmB,AAAY,MAAE,YAAoB,AAAQ,UAAE,WAA6B,AAAQ,UAAE,AAAa;AACvH,aAAW,AAAO,QAAS,CAAC,AAAO,SAAE,AAAM,AAAE,AAAE;AAC7C,UAAM,AAAI,OAAG,AAAU,0BAAC,AAAS,AAAC;AAClC,AAAI,SACD,AAAE,GAAC,AAAO,SAAE,AAAM,AAAC,QACnB,AAAW,YAAC,AAAQ,AAAC;AAExB,AAAgB,gCAAC,AAAI,wBAAM,AAAO;AAAE,AAAa,qBAAE,AAAI,OAAG,AAAI;AAAC,AAA+C,AAAE;;QAC7G,AAAE,GAAC,AAAO,SAAE,AAAM,AAAC,QACnB,AAAE,GAAC,AAAK,OAAE,AAAG,AAAE;AACd,AAAI,WAAC,AAAG,AAAE;AACV,AAAO,cAAC,AAAI,KAAC,AAAI,AAAY,AAAC,AAChC;AAAC,AAAC,OACD,AAAI,KAAC,AAAI;AAAG,AAAG,WAAE,AAAK,AAAC,AAAC,AAC7B;AADgB;AACf,AAAC,AACJ,GAdS;AAcR","sourcesContent":["import { createHash } from \"crypto\"\nimport { createReadStream } from \"fs\"\n\nexport function hashFile(file: string, algorithm: string = \"sha512\", encoding: \"base64\" | \"hex\" = \"base64\", options?: any) {\n  return new Promise<string>((resolve, reject) => {\n    const hash = createHash(algorithm)\n    hash\n      .on(\"error\", reject)\n      .setEncoding(encoding)\n\n    createReadStream(file, {...options, highWaterMark: 1024 * 1024 /* better to use more memory but hash faster */})\n      .on(\"error\", reject)\n      .on(\"end\", () => {\n        hash.end()\n        resolve(hash.read() as string)\n      })\n      .pipe(hash, {end: false})\n  })\n}"]}
